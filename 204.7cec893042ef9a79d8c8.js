"use strict";(self.webpackChunkasset_exit_strategies=self.webpackChunkasset_exit_strategies||[]).push([[204],{9204:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var n=a(6540),s=a(525),i=a(936),r=a(391),c=a(2885);const l=e=>{var{min:t=0,max:a,value:s,disabled:i=!1}=e,r=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(e,["min","max","value","disabled"]);const[c,l]=(0,n.useState)(0===s?"":s);(0,n.useEffect)((()=>{l(s)}),[s]);const o=e=>{const a=e.target.value;("."===a||!isNaN(Number(a))&&Number(a)>=t)&&(l(a),r.onChange(e))};return n.createElement("input",{id:r.id,name:r.name,type:"text",value:c,min:t,disabled:i,onInput:r.enforceMinMax?e=>{const n=parseFloat(e.target.value);n>=t&&(void 0===a||n<=a)&&(l(n),o(e))}:o,placeholder:r.placeholder,onKeyDown:e=>{const t=e.currentTarget.value;if(("."===e.key||"Decimal"===e.key)&&""===t){e.preventDefault();const t="0.";l(t),r.onChange(Object.assign(Object.assign({},e),{target:Object.assign(Object.assign({},e.target),{value:t})}))}},autoComplete:"off"})},o=e=>{const{asset:t,onChange:a}=e,[s,i]=(0,n.useState)(!1);function r(e){return n=>{const s="Quantity"===e?Number(n.target.value):n.target.value;a(Object.assign(Object.assign({},t),{[e]:s}))}}function o(e){const n=e.target.value;t.PriceLevels.length?i(!0):a(Object.assign(Object.assign({},t),{Method:n}))}const u=e=>{if(i(!1),e){const e="Units"===t.Method?"Percentage":"Units";a(Object.assign(Object.assign({},t),{Method:e,PriceLevels:[]}))}};return n.createElement("div",{className:"asset-info-container"},n.createElement("div",{className:"heading-container"},n.createElement("div",{className:"title-container"},n.createElement("h4",null,"Asset Details"))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"AssetName"},"Asset Name"),n.createElement("input",{type:"text",id:"AssetName",name:"AssetName",value:t.AssetName,onChange:r("AssetName"),required:!0,autoComplete:"off",maxLength:16})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"Quantity"},"Quantity"),n.createElement(l,{id:"Quantity",name:"Quantity",value:t.Quantity?t.Quantity:"",onChange:r("Quantity"),required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Disposition"),n.createElement("div",{className:"option-group"},n.createElement("label",{className:"radio-label"},n.createElement("input",{type:"radio",value:"Units",checked:"Units"===t.Method,onChange:o}),"Units"),n.createElement("label",{className:"radio-label"},n.createElement("input",{type:"radio",value:"Percentage",checked:"Percentage"===t.Method,onChange:o}),"Percentage"))),n.createElement(c.A,{isOpen:s,onCancel:()=>u(!1),onAccept:()=>u(!0),primaryButtonText:"Continue",height:"230px",headerText:"Confirm Change"},n.createElement("p",null,"Changing your distribution type to Percentage will invalidate \n\t\tprevious set Price Levels. Would you like to continue?")))};var u=a(4932),m=a(6384);const d=({asset:e,priceLevelBeingEdited:t,onChange:s})=>{const[i,r]=(0,n.useState)(t||(0,m.Sj)(e)),[c,o]=(0,n.useState)((0,m.zI)(e));function d(t){return a=>{"Quantity"===t&&"Percentage"===e.Method?r(Object.assign(Object.assign({},i),{[t]:a.target.value})):r(Object.assign(Object.assign({},i),{[t]:Number(a.target.value)}))}}return(0,n.useEffect)((()=>{r((0,m.Sj)(e))}),[e]),(0,n.useEffect)((()=>{t&&r(t)}),[t]),((e,t)=>{const s=(0,n.useRef)(),[i,r]=(0,n.useState)();(0,n.useEffect)((()=>{a.e(457).then(a.t.bind(a,8142,23)).then((e=>{r((()=>e.default))}))}),[]),(0,n.useEffect)((()=>{i&&!i(s.current,t)&&(s.current=t)}),[t,i]),(0,n.useEffect)((()=>{i&&e()}),[i,s.current])})((()=>{const a=t?t.Quantity:0,n=(0,m.zI)(e)+a;o(n)}),[e.PriceLevels,t,e.Quantity]),n.createElement("div",{className:"price-level-container"},n.createElement("div",{className:"heading-container"},n.createElement("div",{className:"title-container"},n.createElement("h4",null,"Price Levels"),n.createElement("div",{className:"info-container"},n.createElement(u.A,{tooltipText:"Units"===e.Method?"Units is the exact amount of remaining assets to sell at each price":"Percentage calculates the amount of assets to sell at each price \n\t\tby multiplying the chosen percentage by remaining assets."}))),n.createElement("button",{className:"unicode-button",title:(t?"Update":"Add")+" Price Level",disabled:!(t||c&&i.Price&&i.Quantity),onClick:t?function(){const t=i;let a=e.PriceLevels.map((e=>e.Id===t.Id?t:e));"Percentage"===e.Method&&(a=(0,m.pj)(e.Quantity,a)),s(Object.assign(Object.assign({},e),{PriceLevels:a}))}:function(){s(Object.assign(Object.assign({},e),{PriceLevels:[...e.PriceLevels,i]}))}},t?"💾":"➕")),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"Price"},"Selling Price"),n.createElement(l,{id:"Price",name:"Price",value:i.Price,onChange:d("Price"),enforceMinMax:!0,required:!0,disabled:0===c&&!t})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"Quantity"},e.Method),n.createElement(l,Object.assign({id:"Quantity",name:"Quantity",value:i.Quantity,min:0,required:!0,disabled:0===c&&!t,enforceMinMax:!0,onChange:d("Quantity")},"Percentage"===e.Method?{max:1}:{max:c})),"Percentage"===e.Method&&n.createElement("div",{className:"slider"},n.createElement("input",{id:"slider",type:"range",min:"0",max:"1",step:"0.01",value:""===i.Quantity?0:i.Quantity,onChange:d("Quantity")}))))};var g=a(4257),v=a(2404),p=a.n(v),h=a(6113);const b=({errors:e,title:t="Errors",customStyle:a})=>n.createElement("div",{className:"error-container",style:a},n.createElement("h4",null,t),n.createElement("div",null,n.createElement("ul",null,e.map(((e,t)=>n.createElement("li",{key:t},e.Message)))))),E=()=>{const{assets:e,addOrUpdateScenario:t,removeScenario:a}=(0,i.A)(),{appState:l,setAppState:u}=(0,r.A)(),{navigateToMain:v}=(0,s.A)(),[E,y]=(0,n.useState)({isOpen:!1}),f=l.assetBeingEdited||(0,m._Y)(e),[O]=(0,n.useState)(f),[N,P]=(0,n.useState)(f),[j,x]=(0,n.useState)(void 0),[A,C]=(0,n.useState)([]),[S,L]=(0,n.useState)(!1);(0,n.useEffect)((()=>{C([]),0===N.PriceLevels.length&&L(!1)}),[N.AssetName,N.Quantity,N.PriceLevels.length]);const Q=()=>{if(p()(O,N))u(Object.assign(Object.assign({},l),{editingScenario:!1})),v();else{const e=e=>{y(Object.assign(Object.assign({},E),{isOpen:!1})),e&&(u(Object.assign(Object.assign({},l),{editingScenario:!1})),v())};y({isOpen:!0,headerText:"Unsaved Changes",bodyText:"You've made changes that haven't been saved yet. \n\t\t\t\t\tAre you sure you want to proceed and discard your changes?",onCancel:()=>e(!1),onAccept:()=>e(!0)})}};return n.createElement(n.Fragment,null,n.createElement("div",{id:"ScenarioContainer",className:"scenario-container"},n.createElement("div",{className:"flex-container"},n.createElement("div",{className:"left-container"},n.createElement("h2",null,(l.assetBeingEdited?"Edit":"Add New")+" Scenario"),n.createElement(o,{asset:N,onChange:e=>{P(e)}}),n.createElement(d,{asset:N,priceLevelBeingEdited:j,onChange:e=>{P(e),x(void 0)}})),n.createElement("div",{className:"middle-container"},n.createElement("h2",null,"Projected Outcome"),!N.PriceLevels.length&&n.createElement("div",{className:"no-rows-message"},"Add Asset Details and Price Levels to your scenario to view your exit strategy's projected outcome."),N.PriceLevels.length>0&&n.createElement(n.Fragment,null,n.createElement(h.A,{asset:N}),n.createElement(g.A,{asset:N,tableData:(0,m.tu)(N),onError:e=>L(e),onEdit:e=>{const t=N.PriceLevels.find((t=>t.Id===e));x(t)},onDelete:e=>{const t=N.PriceLevels.filter((t=>t.Id!==e));P(Object.assign(Object.assign({},N),{PriceLevels:t}))}})),A.length>0&&n.createElement(b,{title:"Please fix the following errors:",customStyle:0===N.PriceLevels.length?{top:"67px"}:void 0,errors:A})),n.createElement("div",{className:"right-container"},n.createElement("button",{className:"unicode-button",title:"Cancel",onClick:Q},"❌"))),n.createElement("div",{className:"scenario-button-container"},l.assetBeingEdited&&n.createElement("button",{className:"button-secondary",onClick:()=>{const e=e=>{y(Object.assign(Object.assign({},E),{isOpen:!1})),e&&(u(Object.assign(Object.assign({},l),{editingScenario:!1})),a(N.id),v())};y({isOpen:!0,headerText:"Delete Scenario",primaryButtonText:"Confirm",bodyText:`This action will permanently delete your ${N.AssetName?N.AssetName:""}\n\t\t\t\texit strategy. Are you sure you want to continue?`,onCancel:()=>e(!1),onAccept:()=>e(!0)})}},"Delete"),n.createElement("button",{className:"button-primary",onClick:()=>{if(p()(O,N))Q();else{if(!(()=>{const e=[];return N.AssetName||e.push({Field:"AssetName",Message:"Asset name is required."}),N.Quantity||e.push({Field:"Quantity",Message:"An Asset Quantity is required."}),N.PriceLevels&&0!==N.PriceLevels.length||e.push({Field:"PriceLevels",Message:"At least one Price Level is required."}),S&&e.push({Field:"Table",Message:"One or more Price Levels have an error."}),C(e),0===e.length})())return;t(N),v()}}},"Save")),n.createElement(c.A,{isOpen:E.isOpen,onCancel:E.onCancel,onAccept:E.onAccept,primaryButtonText:E.primaryButtonText,height:"230px",headerText:E.headerText},n.createElement("p",null,E.bodyText))))}}}]);
//# sourceMappingURL=204.7cec893042ef9a79d8c8.js.map